<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>xo-battle (static)</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body class="bg-gray-900">
    <div id="root"></div>

    <!-- React + ReactDOM from CDN -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <!-- Babel for in-browser JSX transform -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="text/babel">
    const { useState } = React;

    function RotateCcwIcon({size=20}) {
      return (
        <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-rotate-ccw">
          <polyline points="1 4 1 10 7 10"></polyline>
          <path d="M3.51 15a9 9 0 1 0 .13-6"></path>
        </svg>
      );
    }

    function TicTacToe() {
      const [board, setBoard] = useState(Array(9).fill(null));
      const [isXNext, setIsXNext] = useState(true);
      const [scores, setScores] = useState({ X: 0, O: 0, draws: 0 });

      const calculateWinner = (squares) => {
        const lines = [
          [0, 1, 2], [3, 4, 5], [6, 7, 8],
          [0, 3, 6], [1, 4, 7], [2, 5, 8],
          [0, 4, 8], [2, 4, 6]
        ];
        for (let line of lines) {
          const [a, b, c] = line;
          if (squares[a] && squares[a] === squares[b] && squares[a] === squares[c]) {
            return { winner: squares[a], line };
          }
        }
        return { winner: null, line: null };
      };

      const { winner, line } = calculateWinner(board);
      const isBoardFull = board.every(cell => cell !== null);
      const isDraw = !winner && isBoardFull;

      const handleClick = (index) => {
        if (board[index] || winner) return;

        const newBoard = [...board];
        newBoard[index] = isXNext ? 'X' : 'O';
        setBoard(newBoard);
        setIsXNext(!isXNext);

        const result = calculateWinner(newBoard);
        if (result.winner) {
          setScores(prev => ({ ...prev, [result.winner]: prev[result.winner] + 1 }));
        } else if (newBoard.every(cell => cell !== null)) {
          setScores(prev => ({ ...prev, draws: prev.draws + 1 }));
        }
      };

      const resetGame = () => {
        setBoard(Array(9).fill(null));
        setIsXNext(true);
      };

      const resetScores = () => {
        setScores({ X: 0, O: 0, draws: 0 });
        resetGame();
      };

      return (
        <div className="min-h-screen bg-gray-900 flex items-center justify-center p-4">
          <div className="bg-gray-800 rounded-3xl shadow-2xl p-8 max-w-md w-full">
            <h1 className="text-4xl font-bold text-center mb-6 bg-gradient-to-r from-purple-400 to-pink-500 bg-clip-text text-transparent">
              Tic Tac Toe
            </h1>

            <div className="flex justify-around mb-6 bg-gray-700 rounded-xl p-4">
              <div className="text-center">
                <div className="text-2xl font-bold text-blue-400">{scores.X}</div>
                <div className="text-sm text-gray-300">Player X</div>
              </div>
              <div className="text-center">
                <div className="text-2xl font-bold text-gray-300">{scores.draws}</div>
                <div className="text-sm text-gray-300">Draws</div>
              </div>
              <div className="text-center">
                <div className="text-2xl font-bold text-red-400">{scores.O}</div>
                <div className="text-sm text-gray-300">Player O</div>
              </div>
            </div>

            <div className="grid grid-cols-3 gap-3 mb-6">
              {board.map((cell, index) => {
                const isWinningCell = line && line.includes(index);
                return (
                  <button
                    key={index}
                    onClick={() => handleClick(index)}
                    className={\`aspect-square rounded-xl text-4xl font-bold transition-all duration-200 
                      \${cell ? 'bg-gradient-to-br' : 'bg-gray-700 hover:bg-gray-600'}
                      \${cell === 'X' ? 'from-blue-500 to-blue-700 text-white' : ''}
                      \${cell === 'O' ? 'from-red-500 to-red-700 text-white' : ''}
                      \${isWinningCell ? 'ring-4 ring-yellow-400 scale-105' : ''}
                      \${!cell && !winner ? 'hover:scale-105 cursor-pointer' : ''}
                      \${winner || cell ? 'cursor-not-allowed' : ''}
                    \`}
                  >
                    {cell}
                  </button>
                );
              })}
            </div>

            <div className="text-center mb-4">
              {winner ? (
                <div className="text-2xl font-bold text-green-400">
                  ðŸŽ‰ Player {winner} Wins! ðŸŽ‰
                </div>
              ) : isDraw ? (
                <div className="text-2xl font-bold text-gray-300">
                  It's a Draw!
                </div>
              ) : (
                <div className="text-xl font-semibold text-gray-300">
                  Current Turn: <span className={isXNext ? 'text-blue-400' : 'text-red-400'}>
                    Player {isXNext ? 'X' : 'O'}
                  </span>
                </div>
              )}
            </div>

            <div className="flex gap-3">
              <button
                onClick={resetGame}
                className="flex-1 bg-gradient-to-r from-purple-500 to-pink-500 text-white py-3 rounded-xl font-semibold hover:from-purple-600 hover:to-pink-600 transition-all duration-200 flex items-center justify-center gap-2"
              >
                <RotateCcwIcon size={20} />
                New Game
              </button>
              <button
                onClick={resetScores}
                className="flex-1 bg-gray-700 text-white py-3 rounded-xl font-semibold hover:bg-gray-600 transition-all duration-200"
              >
                Reset Scores
              </button>
            </div>
          </div>
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById('root')).render(<TicTacToe />);
    </script>
  </body>
</html>
